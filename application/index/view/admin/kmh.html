{include file="public/admin-top" /}

<table id="table"></table>

<script type="text/javascript">
    $(document).ready(function () {

        $('#table').bootstrapTable('destroy');
        $("#table").bootstrapTable({
            method: "get",
            url: "{:url('index/kmh/tasklist_send')}",
            search:true,
            //toolbar: '#toolbar',                //工具按钮用哪个容器
            striped: true,  //表格显示条纹，默认为false
            pagination: true, // 在表格底部显示分页组件，默认false
            pageList: [10, 20], // 设置页面可以显示的数据条数
            pageSize: 10, // 页面数据条数
            pageNumber: 1, // 首页页码
            sidePagination: 'client', // 设置为服务器端分页
            showRefresh:false,
            showColumns: true,
            height:500,
            sortable:true,
            showExport: true,
            exportTypes:['excel','txt'],  //导出文件类型
            exportDataType: "basic",
            exportOptions:{
                ignoreColumn: [0],  //忽略某一列的索引
                fileName: '开门红故障处理列表',  //文件名称设置
                worksheetName: 'sheet1',  //表格工作区名称
                tableName: '开门红故障处理列表',
                excelstyles: ['background-color', 'color', 'font-size', 'font-weight'],
            },
            queryParams: function (params) { // 请求服务器数据时发送的参数，可以在这里添加额外的查询参数，返回false则终止请求

                return {
                    limit: params.limit, // 每页要显示的数据条数
                    offset: params.offset, // 每页显示数据的开始行号
                }
            },
            columns: [
                {
                    checkbox: true, // 显示一个勾选框
                    align: 'center' // 居中显示
                },
                {
                    field: 'task_id', // 返回json数据中的name
                    title: '任务编号', // 表格表头显示文字
                    align: 'left', // 左右居中
                    valign: 'middle', // 上下居中
                    sortable: true
                }, {
                    field: 'cellname',
                    title: '问题小区名',
                    align: 'left',
                    valign: 'middle',
                    sortable: true
                }, {
                    field: 'task_order',
                    title: '目前对应未解决聚类工单',
                    align: 'left',
                    valign: 'middle',
                }, {
                    field: 'task_solution',
                    title: '详细解决方案',
                    align: 'left',
                    valign: 'middle'
                }, {
                    field: 'solve_danwei',
                    title: '解决单位',
                    align: 'left',
                    valign: 'middle'
                }, {
                    field: 'area',
                    title: '区域',
                    align: 'left',
                    valign: 'middle',
                    sortable: true,

                },{
                    field:'wangge_wh24',
                    title: '归属24个维护网格',
                    align: 'left',
                    valign: 'middle',
                    sortable: true,
                },{
                    field:'wangge_zh35',
                    title: '归属35个综合网格',
                    align: 'left',
                    valign: 'middle',
                    sortable: true,

                },{
                    field:'solve',
                    title: '是否解决',
                    align: 'left',
                    valign: 'middle',
                    sortable: true,
                },{
                    field:'solve_beizhu',
                    title: '备注',
                    align: 'left',
                    valign: 'middle',
                }, {
                    field: 'solve_user', // 返回json数据中的name
                    title: '反馈人员', // 表格表头显示文字
                    align: 'left', // 左右居中
                    valign: 'middle', // 上下居中
                }, {
                    field: 'solve_time', // 返回json数据中的name
                    title: '反馈时间', // 表格表头显示文字
                    align: 'left', // 左右居中
                    valign: 'middle', // 上下居中
                }, {
                    field: 'evaluate', // 返回json数据中的name
                    title: '是否评估通过', // 表格表头显示文字
                    align: 'left', // 左右居中
                    valign: 'middle', // 上下居中
                    sortable: true,
                }, {
                    field: 'eval_shuoming', // 返回json数据中的name
                    title: '评估说明', // 表格表头显示文字
                    align: 'left', // 左右居中
                    valign: 'middle', // 上下居中
                }, {
                    field: 'eval_user', // 返回json数据中的name
                    title: '评估人员', // 表格表头显示文字
                    align: 'left', // 左右居中
                    valign: 'middle', // 上下居中
                }, {
                    field: 'eval_time', // 返回json数据中的name
                    title: '评估时间', // 表格表头显示文字
                    align: 'left', // 左右居中
                    valign: 'middle', // 上下居中
                }
            ],
            onLoadSuccess: function(){  //加载成功时执行
                console.info("加载成功");
            },
            onLoadError: function(){  //加载失败时执行
                console.info("加载数据失败");
            }


        });
    })
</script>

{include file="public/admin-bottom" /}
